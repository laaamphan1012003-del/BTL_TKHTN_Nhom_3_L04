<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Home Dashboard</title>
    <link rel="stylesheet" href="../style.css">
    <script type="text/javascript" src="../script.js" defer></script>
</head>

<body class="dashboard-body">

    <!-- Sidebar -->
    <nav class="sidebar">
        <div class="sidebar-header">
            <h2>Smart Home</h2>
        </div>
        <ul class="nav-links">
            <li class="nav-item active" onclick="switchTab('iot')">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z" />
                </svg>
                IoT Dashboard
            </li>
            <li class="nav-item" onclick="switchTab('face')">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <path
                        d="M9 11.75c-.69 0-1.25.56-1.25 1.25s.56 1.25 1.25 1.25 1.25-.56 1.25-1.25-.56-1.25-1.25-1.25zm6 0c-.69 0-1.25.56-1.25 1.25s.56 1.25 1.25 1.25 1.25-.56 1.25-1.25-.56-1.25-1.25-1.25zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8 0-.29.02-.58.05-.86 2.36-1.05 4.23-2.98 5.21-5.37C11.07 8.33 14.05 10 17.42 10c.78 0 1.53-.09 2.25-.26.21 1.01.33 2.05.33 3.1 0 3.96-2.97 7.2-6.85 7.84-1.15.19-2.35.19-3.15.19z" />
                </svg>
                Face Attendance
            </li>
        </ul>
        <div class="sidebar-footer">
            <button class="logout-btn" onclick="logout()">Logout</button>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">

        <!-- IoT Tab -->
        <div id="iot-tab" class="tab-content active">
            <h1>IoT Dashboard</h1>
            <div class="dashboard-grid">
                <!-- Sensor Cards -->
                <div class="card">
                    <h3>Temperature</h3>
                    <div class="sensor-value" id="temp-value">--</div>
                </div>
                <div class="card">
                    <h3>Humidity</h3>
                    <div class="sensor-value" id="humid-value">--</div>
                </div>

                <!-- Real-time Chart -->
                <div class="card chart-container">
                    <h3>Live Data</h3>
                    <canvas id="sensorChart"></canvas>
                </div>

                <!-- Device List -->
                <div class="card">
                    <h3>Connected Devices</h3>
                    <ul class="device-list">
                        <li class="device-item">
                            <span><span class="status-indicator status-on"></span>Main ESP32</span>
                            <span>Online</span>
                        </li>
                        <li class="device-item">
                            <span><span class="status-indicator status-off"></span>Kitchen Sensor</span>
                            <span>Offline</span>
                        </li>
                        <li class="device-item">
                            <span><span class="status-indicator status-on"></span>Smart Light</span>
                            <span>Active</span>
                        </li>
                    </ul>
                </div>

                <!-- Event Log -->
                <div class="card">
                    <h3>System Logs</h3>
                    <div class="log-list" id="log-list">
                        <!-- Logs will be injected here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Face Attendance Tab -->
        <div id="face-tab" class="tab-content">
            <h1>Face Attendance System</h1>

            <div class="dashboard-grid">
                <!-- Camera Feed -->
                <div class="card" style="grid-column: 1 / -1;">
                    <h3>Live Camera Feed</h3>
                    <div class="camera-box">
                        <div id="camera-placeholder">
                            <svg xmlns="http://www.w3.org/2000/svg" height="64px" viewBox="0 -960 960 960" width="64px"
                                fill="#666">
                                <path
                                    d="M480-480q-66 0-113-47t-47-113q0-66 47-113t113-47q66 0 113 47t47 113q0 66-47 113t-113 47ZM160-160v-112q0-34 17.5-62.5T224-378q62-31 126-46.5T480-440q66 0 130 15.5T736-378q29 15 46.5 43.5T800-272v112H160Z" />
                            </svg>
                            <p style="margin-top: 10px;">Camera Offline (Simulation Mode)</p>
                        </div>
                        <div class="camera-overlay" id="scan-status" style="display: none;">Scanning...</div>
                    </div>

                    <div class="control-panel">
                        <button class="control-btn btn-primary" onclick="simulateScan()">
                            <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px"
                                fill="#fff">
                                <path
                                    d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 14H9V8h2v8zm4 0h-2V8h2v8z" />
                            </svg>
                            Scan Face
                        </button>
                        <button class="control-btn btn-secondary" onclick="simulateCapture()">
                            <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px"
                                fill="#fff">
                                <path
                                    d="M9 2L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z" />
                            </svg>
                            Capture Image
                        </button>
                        <button class="control-btn btn-outline"
                            onclick="alert('Please connect TKHTN module for registration.')">
                            <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px"
                                fill="currentColor">
                                <path
                                    d="M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm-9-2V7H4v3H1v2h3v3h2v-3h3v-2H6zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" />
                            </svg>
                            Register New Face
                        </button>
                    </div>
                </div>

                <!-- Recent Scans -->
                <div class="card" style="grid-column: 1 / -1;">
                    <h3>Recent Scans</h3>
                    <div class="recent-scans" id="recent-scans">
                        <!-- Scans will be injected here -->
                    </div>
                </div>
            </div>
        </div>

    </main>
</body>

</html>