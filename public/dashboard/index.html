<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>System Monitor Center</title>
    
    <!-- Link CSS -->
    <link rel="stylesheet" href="../style.css">
    <link rel="stylesheet" href="style.css">
    
    <!-- Link Script -->
    <script type="text/javascript" src="script.js" defer></script>
</head>

<body>

    <div class="app-layout">
        
        <!-- SIDEBAR -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="logo-area">
                    <svg xmlns="http://www.w3.org/2000/svg" height="32" viewBox="0 96 960 960" width="32" fill="#fff">
                        <path d="M520 856V616h280v240H520Zm-360 0V496h280v360H160Zm360-440V176h280v240H520ZM160 416V176h280v240H160Z"/>
                    </svg>
                    <span class="app-name">IoT Monitor</span>
                </div>
                <button id="toggle-btn" class="toggle-btn" aria-label="Toggle Sidebar" title="Toggle Sidebar">
                    <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 96 960 960" width="24" fill="#fff">
                        <path d="M480 736q-16 0-27-11t-11-27q0-16 11-27t27-11q16 0 27 11t11 27q0 16-11 27t-27 11ZM240 736q-16 0-27-11t-11-27q0-16 11-27t27-11q16 0 27 11t11 27q0 16-11 27t-27 11ZM720 736q-16 0-27-11t-11-27q0-16 11-27t27-11q16 0 27 11t11 27q0 16-11 27t-27 11Z"/></svg>
                    </button>
            </div>
            
            <div class="user-info">
                <span id="sidebar-username">Guest</span>
                <span id="sidebar-email">guest@example.com</span>
            </div>

            <nav class="nav">
                <button class="nav-item active" onclick="switchTab('dashboard')">
                    <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 96 960 960" width="24" fill="#fff"><path d="M120 816v-280h160v280H120Zm360 0v-280h160v280H480Zm360 0v-280h160v280H840ZM120 456V176h160v280H120Zm360 0V176h160v280H480Zm360 0V176h160v280H840Z"/></svg>
                    <span>Dashboard</span>
                </button>
                <button class="nav-item" onclick="switchTab('users'); loadUsers();">
                    <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 96 960 960" width="24" fill="#fff"><path d="M480 576q-66 0-113-47t-47-113q0-66 47-113t113-47q66 0 113 47t47 113q0 66-47 113t-113 47Zm0 200q-134 0-227-89.5T160 480q0-85 93-174.5T480 220q134 0 227 89.5T800 580q0 85-93 174.5T480 776Zm0 200q-216 0-350-127.5T60 580q24-91 106-166t280-247q-216 0-350-127.5T60 580q24-91 106-166t280-247q-216 0-350-127.5T60 580q24-91 106-166t280-247Z"/></svg>
                    <span>Users</span>
                </button>
            </nav>

            <button class="logout-btn" onclick="logout()">
                <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 96 960 960" width="24" fill="#fff"><path d="M480 736q-66 0-113-47t-47-113q0-66 47-113t113-47q66 0 113 47t47 113q0 66-47 113t-113 47Zm0 200q-134 0-227-89.5T160 480q0-85 93-174.5T480 220q134 0 227 89.5T800 580q0 85-93 174.5T480 776Zm0 200q-216 0-350-127.5T60 580q24-91 106-166t280-247q-216 0-350-127.5T60 580q24-91 106-166t280-247q-216 0-350-127.5T60 580q24-91 106-166t280-247Z"/></svg>
                <span>Logout</span>
            </button>
        </aside>

        <!-- MAIN CONTENT AREA -->
        <main class="main-content">
            
            <!-- VIEW 1: DASHBOARD -->
            <div id="view-dashboard" class="view-section active">
                <header class="content-header">
                    <h2>System Dashboard</h2>
                </header>
                <div class="dashboard-grid">
                    
                    <!-- MAIN STATS AND LOG AREA -->
                    <div class="main-stats-area">
                        

                        <!-- SERVER ACTIVITY LOG -->
                        <div class="card log-card">
                            <h3>SERVER ACTIVITY LOG </h3>
                            <div  class="log-container">
                                <!-- Dữ liệu log sẽ được đổ vào đây -->
                                <pre id="log-list" class="placeholder">Loading FaceID log data...</pre>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Control Modules (Control area) -->
                    <div class="control-area">
                        <div class="card small-card">
                            <h3>Device Control (ESP32)</h3>
                            <div class="module-content">
                                <!-- CHỈ GIỮ LED STATUS -->
                                <p>LED Status: <span id="led-status">--</span></p>
                                <button id="toggle-led-btn" class="action-btn">Toggle LED</button>
                            </div>
                        </div>
                        <div class="card small-card">
                            <h3>Face ID</h3>
                            <div class="module-content">
                                <a href="../face-recognition.html" class="btn-link">Access Module</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- VIEW 2: USER TABLE  -->
            <div id="view-users" class="view-section">
                <header class="content-header">
                    <h2>Registered Users</h2>
                    <button class="refresh-btn" onclick="loadUsers()">Refresh Data</button>
                </header>

                <div class="card table-card">
                    <table class="user-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Name</th>
                                <th>Email</th>
                                <th>Registered At</th>
                                <th>Last Login</th>
                            </tr>
                        </thead>
                        <tbody id="user-table-body">
                            <!-- Dữ liệu sẽ đổ vào đây -->
                        </tbody>
                    </table>
                </div>
            </div>

        </main>
    </div>

</body>
</html>